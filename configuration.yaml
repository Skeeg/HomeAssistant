
# Configure a default setup of Home Assistant (frontend, api, etc)
default_config:

# Uncomment this if you are using SSL/TLS, running in Docker container, etc.
http:
  # For extra security set this to only accept connections on localhost if NGINX is on the same machine
  # server_host: 127.0.0.1
  # Update this line to be your domain
  base_url: https://home.skeeg.net
  use_x_forwarded_for: true
  # You must set the trusted proxy IP address so that Home Assistant will properly accept connections
  # Set this to your NGINX machine IP, or localhost if hosted on the same machine.
  trusted_proxies: 10.2.2.4

# Text to speech
tts:
  - platform: google_translate

group: !include groups.yaml
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml

tuya:
  username: !secret tuya_username
  password: !secret tuya_password
  country_code: "1"
  platform: "smart_life"

cover:
  - platform: myq
    username: !secret myq_username
    password: !secret myq_password

# Example configuration.yaml entry
binary_sensor:
  - platform: workday
    country: US
    workdays: [mon, tue, wed, thu, fri]
    excludes: [sat, sun, holiday]
    add_holidays:
      - '2018-12-26'
      - '2018-12-31'
      - '2020-07-06'
      - '2020-07-07'
      - '2020-07-08'
      - '2020-07-09'
      - '2020-07-10'

ring:
  username: !secret ring_username
  password: !secret ring_password

camera:
  platform: ring

media_player:
  - platform: songpal
    name: soundbar
    endpoint: http://10.2.3.115:10000/sony

homekit:
  filter:
    include_domains:
      - cover
      - light
      - switch
    exclude_entities:
      - switch.computer_server
      - switch.computer_austin
      - switch.computer_lily
      - switch.hot_tub
      - switch.electric_fence
      - switch.03200076dc4f22233be2
      - switch.03200076dc4f22233d50

mqtt:
  broker: 10.2.2.4
  port: 1883
  client_id: skg-home-assistant
  keepalive: 60
  username: admin
  password: admin
  protocol: 3.1
  birth_message:
    topic: "homeassistant/tele/hass1/LWT"
    payload: "Online"
    qos: 1
    retain: true
  will_message:
    topic: "homeassistant/tele/hass1/LWT"
    payload: "Offline"
    qos: 1
    retain: true

group:
  lights:
    name: AllLights
    entities:
      - light.family_lights
      - light.entry_cans
  bedtime:
    name: BedTime
    entities:
      - switch.demo_tasmota_switch
      - light.family_lights
      - light.entry_cans

switch:
  - platform: mqtt
    name: "Demo Tasmota Switch"
    availability_topic: "homeassistant/tele/demo_unit/LWT"
    state_topic: "homeassistant/stat/demo_unit/POWER"
    command_topic: "homeassistant/cmnd/demo_unit/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Family Fan"
    availability_topic: "homeassistant/tele/FamilyFan/LWT"
    state_topic: "homeassistant/stat/FamilyFan/POWER"
    command_topic: "homeassistant/cmnd/FamilyFan/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Powder Fan"
    availability_topic: "homeassistant/tele/PowderFan/LWT"
    state_topic: "homeassistant/stat/PowderFan/POWER"
    command_topic: "homeassistant/cmnd/PowderFan/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Kids Bathroom Fan"
    availability_topic: "homeassistant/tele/KidsBathroomFan/LWT"
    state_topic: "homeassistant/stat/KidsBathroomFan/POWER"
    command_topic: "homeassistant/cmnd/KidsBathroomFan/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Railing Lights"
    availability_topic: "homeassistant/tele/RailingLights/LWT"
    state_topic: "homeassistant/stat/RailingLights/POWER"
    command_topic: "homeassistant/cmnd/RailingLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Curtain Lights"
    availability_topic: "homeassistant/tele/CurtainLights/LWT"
    state_topic: "homeassistant/stat/CurtainLights/POWER"
    command_topic: "homeassistant/cmnd/CurtainLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Christmas Package"
    availability_topic: "homeassistant/tele/ChristmasPackage/LWT"
    state_topic: "homeassistant/stat/ChristmasPackage/POWER"
    command_topic: "homeassistant/cmnd/ChristmasPackage/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Buffet Decor"
    availability_topic: "homeassistant/tele/BuffetDecor/LWT"
    state_topic: "homeassistant/stat/BuffetDecor/POWER"
    command_topic: "homeassistant/cmnd/BuffetDecor/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Hot Tub"
    availability_topic: "homeassistant/tele/HotTub/LWT"
    state_topic: "homeassistant/stat/HotTub/POWER"
    command_topic: "homeassistant/cmnd/HotTub/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Electric Fence"
    availability_topic: "homeassistant/tele/ElectricFence/LWT"
    state_topic: "homeassistant/stat/ElectricFence/POWER"
    command_topic: "homeassistant/cmnd/ElectricFence/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Computer Austin"
    availability_topic: "homeassistant/tele/ComputerAustin/LWT"
    state_topic: "homeassistant/stat/ComputerAustin/POWER"
    command_topic: "homeassistant/cmnd/ComputerAustin/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Computer Lily"
    availability_topic: "homeassistant/tele/ComputerLily/LWT"
    state_topic: "homeassistant/stat/ComputerLily/POWER"
    command_topic: "homeassistant/cmnd/ComputerLily/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Main TV"
    availability_topic: "homeassistant/tele/MainTV/LWT"
    state_topic: "homeassistant/stat/MainTV/POWER"
    command_topic: "homeassistant/cmnd/MainTV/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Mantle Decor"
    availability_topic: "homeassistant/tele/MantleDecor/LWT"
    state_topic: "homeassistant/stat/MantleDecor/POWER"
    command_topic: "homeassistant/cmnd/MantleDecor/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Master TV"
    availability_topic: "homeassistant/tele/MasterTV/LWT"
    state_topic: "homeassistant/stat/MasterTV/POWER"
    command_topic: "homeassistant/cmnd/MasterTV/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Computer Server"
    availability_topic: "homeassistant/tele/ComputerServer/LWT"
    state_topic: "homeassistant/stat/ComputerServer/POWER"
    command_topic: "homeassistant/cmnd/ComputerServer/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true

sensor:
- platform: mqtt
  name: Curtain Lights Energy Total
  state_topic: "homeassistant/tele/CurtainLights/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Curtain Lights Watts
  state_topic: "homeassistant/tele/CurtainLights/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Dads Lamp Energy Total
  state_topic: "homeassistant/tele/DadsLamp/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Dads Lamp Watts
  state_topic: "homeassistant/tele/DadsLamp/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Railing Lights Energy Total
  state_topic: "homeassistant/tele/RailingLights/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Railing Light Watts
  state_topic: "homeassistant/tele/RailingLights/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Hot Tub Energy Total
  state_topic: "homeassistant/tele/HotTub/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Hot Tub Watts
  state_topic: "homeassistant/tele/HotTub/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Buffet Decor Energy Total
  state_topic: "homeassistant/tele/BuffetDecor/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Buffet Decor Watts
  state_topic: "homeassistant/tele/BuffetDecor/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Electric Fence Energy Total
  state_topic: "homeassistant/tele/ElectricFence/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Electric Fence Watts
  state_topic: "homeassistant/tele/ElectricFence/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name:  Energy Total
  state_topic: "homeassistant/tele//SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Computer - Austin Watts
  state_topic: "homeassistant/tele/ComputerAustin/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Computer - Austin Energy Total
  state_topic: "homeassistant/tele/ComputerAustin/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Computer - Lily Watts
  state_topic: "homeassistant/tele/ComputerLily/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Computer - Lily Energy Total
  state_topic: "homeassistant/tele/ComputerLily/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name:  Watts
  state_topic: "homeassistant/tele//SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Main TV Energy Total
  state_topic: "homeassistant/tele/MainTV/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Main TV Watts
  state_topic: "homeassistant/tele/MainTV/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Mantle Decor Energy Total
  state_topic: "homeassistant/tele/MantleDecor/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Mantle Decor Watts
  state_topic: "homeassistant/tele/MantleDecor/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Master TV Energy Total
  state_topic: "homeassistant/tele/MasterTV/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Master TV Watts
  state_topic: "homeassistant/tele/MasterTV/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Computer - Server Energy Total
  state_topic: "homeassistant/tele/ComputerServer/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Computer - Server Watts
  state_topic: "homeassistant/tele/ComputerServer/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Garage Lamp Energy Total
  state_topic: "homeassistant/tele/GarageLamp/SENSOR"
  value_template: '{{ value_json["ENERGY"]["Total"] }}'
  scan_interval: 300
  unit_of_measurement: kWh
- platform: mqtt
  name: Garage Lamp Watts
  state_topic: "homeassistant/tele/GarageLamp/SENSOR"
  value_template: '{{ value_json["ENERGY"]["ApparentPower"] }}'
  scan_interval: 300
  unit_of_measurement: W
- platform: mqtt
  name: Curtain Lights Processing
  state_topic: "homeassistant/tele/CurtainLights/STATE"
  value_template: '{{ value_json["LoadAvg"] }}'
  scan_interval: 300
  unit_of_measurement: '%'
- platform: mqtt
  name: MainHall_C2 Processing
  state_topic: "homeassistant/tele/MainHall_C2/STATE"
  value_template: '{{ value_json["LoadAvg"] }}'
  scan_interval: 300
  unit_of_measurement: '%'

light:
  - platform: mqtt
    name: "Family Lights"
    availability_topic: "homeassistant/tele/FamilyLights/LWT"
    state_topic: "homeassistant/stat/FamilyLights/POWER"
    command_topic: "homeassistant/cmnd/FamilyLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Powder Lights"
    availability_topic: "homeassistant/tele/PowderLights/LWT"
    state_topic: "homeassistant/stat/PowderLights/POWER"
    command_topic: "homeassistant/cmnd/PowderLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Entry Cans"
    availability_topic: "homeassistant/tele/EntryCans/LWT"
    state_topic: "homeassistant/stat/EntryCans/POWER"
    command_topic: "homeassistant/cmnd/EntryCansGroup/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Study Lights"
    availability_topic: "homeassistant/tele/StudyLights/LWT"
    state_topic: "homeassistant/stat/StudyLights/POWER"
    command_topic: "homeassistant/cmnd/StudyLightsGroup/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Main Hall Lights"
    availability_topic: "homeassistant/tele/MainHall/LWT"
    state_topic: "homeassistant/stat/MainHall/POWER"
    command_topic: "homeassistant/cmnd/MainHallGroup/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Kitchen Cans"
    availability_topic: "homeassistant/tele/KitchenCans/LWT"
    state_topic: "homeassistant/stat/KitchenCans/POWER"
    command_topic: "homeassistant/cmnd/KitchenCansGroup/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Kitchen Sink Lights"
    availability_topic: "homeassistant/tele/KitchenSink/LWT"
    state_topic: "homeassistant/stat/KitchenSink/POWER"
    command_topic: "homeassistant/cmnd/KitchenSinkGroup/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Powder Hall Lights"
    availability_topic: "homeassistant/tele/PowderHall/LWT"
    state_topic: "homeassistant/stat/PowderHall/POWER"
    command_topic: "homeassistant/cmnd/PowderHall/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Library Lights"
    availability_topic: "homeassistant/tele/LibraryLights/LWT"
    state_topic: "homeassistant/stat/LibraryLights/POWER"
    command_topic: "homeassistant/cmnd/LibraryLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Eve Lights"
    availability_topic: "homeassistant/tele/EveLights/LWT"
    state_topic: "homeassistant/stat/EveLights/POWER"
    command_topic: "homeassistant/cmnd/EveLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Porch Lights"
    availability_topic: "homeassistant/tele/PorchLights/LWT"
    state_topic: "homeassistant/stat/PorchLights/POWER"
    command_topic: "homeassistant/cmnd/PorchLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Basement Lights"
    availability_topic: "homeassistant/tele/BasementLights/LWT"
    state_topic: "homeassistant/stat/BasementLights/POWER"
    command_topic: "homeassistant/cmnd/BasementLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Dads Lamp"
    availability_topic: "homeassistant/tele/DadsLamp/LWT"
    state_topic: "homeassistant/stat/DadsLamp/POWER"
    command_topic: "homeassistant/cmnd/DadsLamp/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Dads Lights"
    availability_topic: "homeassistant/tele/DadsLights/LWT"
    state_topic: "homeassistant/stat/DadsLights/POWER"
    command_topic: "homeassistant/cmnd/DadsLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Garage Lamp"
    availability_topic: "homeassistant/tele/GarageLamp/LWT"
    state_topic: "homeassistant/stat/GarageLamp/POWER"
    command_topic: "homeassistant/cmnd/GarageLamp/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Garage Lights"
    availability_topic: "homeassistant/tele/GarageLights/LWT"
    state_topic: "homeassistant/stat/GarageLights/POWER"
    command_topic: "homeassistant/cmnd/GarageLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Dining Lights"
    availability_topic: "homeassistant/tele/DiningLights/LWT"
    state_topic: "homeassistant/stat/DiningLights/POWER"
    command_topic: "homeassistant/cmnd/DiningLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Patio Lights"
    availability_topic: "homeassistant/tele/PatioLights/LWT"
    state_topic: "homeassistant/stat/PatioLights/POWER"
    command_topic: "homeassistant/cmnd/PatioLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
  - platform: mqtt
    name: "Exterior Garage Lights"
    availability_topic: "homeassistant/tele/ExteriorGarageLights/LWT"
    state_topic: "homeassistant/stat/ExteriorGarageLights/POWER"
    command_topic: "homeassistant/cmnd/ExteriorGarageLights/POWER"
    qos: 0
    payload_available: "Online"
    payload_not_available: "Offline"
    optimistic: false
    retain: true
    

timer:
  powder_bathroom_fan:
    duration: '00:30:00'
  kids_bathroom_fan:
    duration: '00:30:00'
  dads_lamp:
    duration: '01:00:00'